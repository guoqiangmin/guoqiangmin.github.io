<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Analytics Client Collection</title>
</head>
<body>

<h1>Analytics Client Collection</h1>

<button onClick="reportViewItem()">View Product</button>
<button onClick="reportAddToCart()">Add to Cart</button>
<button onClick="reportCheckout()">Checkout</button>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-221636286-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  // gtag('config', 'UA-221636286-1');
  // global configuration of app name
  gtag('config', 'UA-221636286-1', { 'app_name': 'TestApp' }); 
</script>

<script>
  // Send data for measuring common user interactions
  
  /* Measure Timing */
  // Feature detects Navigation Timing API support.
  if (window.performance) {
    // Gets the number of milliseconds since page load
    // (and rounds the result since the value must be an integer).
    var timeSincePageLoad = Math.round(performance.now());

    // Sends the timing event to Google Analytics.
    gtag('event', 'timing_complete', {
      'name': 'load',
      'value': timeSincePageLoad,
      'event_category': 'JS Dependencies'
    });
  }

  /* Measure app / screen view */
  // The app_name field is now set for the property, so
  // screen_view events don't need to include it.
  gtag('event', 'screen_view', { 'screen_name': 'Home'});

  /* Measure e-commerce & engagement */
  function reportViewItem() {
    gtag('event', 'view_item', {
      'event_label': 'View Item',
      'event_category': 'engagement'
    });
  }

  function reportAddToCart() {
    gtag('event', 'add_to_cart', {
      'event_label': 'Add to cart',
      'event_category': 'ecommerce'
    });
  }

  function reportCheckout() {
    gtag('event', 'begin_checkout', {
      'event_label': 'Checkout',
      'event_category': 'ecommerce'
    });
  }
</script>

</body>
</html>
